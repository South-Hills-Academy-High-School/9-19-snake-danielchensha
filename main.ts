controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    vx = 0
    vy = -1
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    vx = -1
    vy = 0
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    vx = 1
    vy = 0
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    vx = 0
    vy = 1
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    if (atefoodflag == 0 && snakehead.overlapsWith(snakefood)) {
        snakebody.unshift(sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            `, SpriteKind.Player))
        snakebody[0].setPosition(foodx - updatevx * 10 + 2, foody - updatevy * 10 + 2)
        foodx = randint(0, 15) * 10
        foody = randint(0, 11) * 10
    }
    atefoodflag += 1
})
let snakeheady = 0
let snakeheadx = 0
let updatevy = 0
let updatevx = 0
let vy = 0
let vx = 0
let foody = 0
let foodx = 0
let snakefood: Sprite = null
let snakehead: Sprite = null
let atefoodflag = 0
let snakebody: Sprite[] = []
scene.setBackgroundImage(img`
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995555555555555555
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995555555555555555
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995555555555555555
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995555555555555555
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995999999999995555555555555555
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999555555999999995555555555555555
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995599999999999999555555555555555
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999555555555555555
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999955555555555555
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995555555555555
    9999999999999999999999999999999999999999999999999111999999999999999999999999999999999999999999999999999999999999999999999999999991119999999999999999555555555555
    99999d11d9999999999999999999999999999999999999991111199999999999999999999999999999999d11d99999999999999999999999999999999999999911111999999955559999995555555559
    99991111119999999999999999999999999999999991199111111d9999999999999999999999999999991111119999999999999999999999999999999991199111111d99999959999999999999999999
    9991111111d99999999999999999999999999999991111d1111111199999999999999999999999999991111111d99999999999999999999999999999991111d111111119999599999999999999999999
    99911111111d11999999999999999999999999999d1111111111111d99999999999999999999999999911111111d11999999999999999999999999999d1111111111111d999599999999999999999999
    991111111111111999999999999999999999999d11111111111111111d9999999999999999999999991111111111111999999999999999999999999d11111111111111111d9999999999999999999999
    1d1111111111111d91119999999999999999999999999999999999999999999966699999999999911d1111111111111d9111999999999999999999999999999999999999999999996669999995999991
    1111111111111111111119999999999999999999999999999999999999999996776699999999991111111111111111111111199999999999999999999999999999999999999999967766999995999911
    1111111111166666111119999999999999999999999999999999999999999966777699999999991111111111111666661111199999999999999999999999999999999999999999667776999955999911
    111111111166777661111111d999999999999999999999999999999999999967777669999999d111111111111166777661111111d999999999999999999999999999999999999967777669995999d111
    9999999996677777669999999999999999999999999999999999999999999967777769999999999999999999966777776699999999999999999999999999999999999999999999677777699959999999
    9999999996777777769999999999999999999999999999999999999999999967777769999999999999999999967777777699999999999999999999999999999999999999999999677777699959999999
    9999999966777777766999999999999999999999999999999999999999999967777769999999999999999999667777777669999999999999999999999999999999999999999999677777699959999999
    9999999967777777776999999999999999999999999999999999999999999967777769999999999999999999677777777769999999999999999999999999999999999999999999677777699999999999
    9999999967777777776999966999999999999999999999999999999999999967777769999999999999999999677777777769999669999999999999999999999999999999999999677777699999999999
    9999999967777777776999677699999999999999999999999999999996699967777769999999999999999999677777777769996776999999999999999999999999999999966999677777699999999999
    9999999967777777776996677669999999999999999999999999999967769967777769999999999999999999677777777769966776699999999999999999999999999999677699677777699999999999
    9999999967777777776996777769999999999999999999999999999967769967777769999999999999999999677777777769967777699999999999999999999999999999677699677777699999999999
    9999999967777777776996777769999999999999999999999999999967769967777769999999999999999999677777777769967777699999999999999999999999999999677699677777699999999999
    6666999967777777776666777769999999999666666999999999999967769967777769999999999666669999677777777766667777699999999996666669999999999999677699677777699999999996
    7776699967777777777777777769999999996666666699999999999967769967777769996699996677766999677777777777777777699999999966666666999999999999677699677777699966999966
    7777699967777777777777777699999999966666666669999999999967769967777769967669966777776999677777777777777776999999999666666666699999999999677699677777699676699667
    7777769967777777777777776699999999966666666669999999999967769967777769967769967777777699677777777777777766999999999666666666699999999999677699677777699677699677
    7777769967777777776666666999999999666666666669999999999967769967777769967769967777777699677777777766666669999999996666666666699999999999677699677777699677699677
    7777776967777777776999999999999999666666666669999999999967776667777769677769967777777769677777777769999999999999996666666666699999999999677766677777696777699677
    7777776967777777776999999999999999666666666666999999999966777777777766677766667777777769677777777769999999999999996666666666669999999999667777777777666777666677
    7777776967777777776999666666666999666666666666999999999996677777777776677666677777777769677777777769996666666669996666666666669999999999966777777777766776666777
    7777776667777777776966677777776669666666666666999999999999666677777777777666677777777766677777777769666777777766696666666666669999999999996666777777777776666777
    7777776667777777776667777777777766666666666666999966666699999677777777777666677777777766677777777766677777777777666666666666669999666666999996777777777776666777
    7777776667777777776677777777777776666666666666966677777666999677777777776666677777777766677777777766777777777777766666666666669666777776669996777777777766666777
    7777777667777777776777777777777777666666666666667777777776699677777766666666677777777776677777777767777777777777776666666666666677777777766996777777666666666777
    7777777667777777766777777777777777666666666666677777777777669677777766666666677777777776677777777667777777777777776666666666666777777777776696777777666666666777
    7777777667777777767777777777777777766666666666777777777777766677777766666666677777777776677777777677777777777777777666666666667777777777777666777777666666666777
    7777777667777777667777777777777777766666666666777777777777766677777766666666677777777776677777776677777777777777777666666666667777777777777666777777666666666777
    7777777667777777677777777777777777776666666666777777777777766677777766666666677777777776677777776777777777777777777766666666667777777777777666777777666666666777
    77777776677777bbbbbbbb77777777777777666666666677777777bbbbbbbb77777766666666677777777776677777bbbbbbbb77777777777777666666666677777777bbbbbbbb777777666666666777
    777777766777bbb777777bbbb777777777776666666666777777bbb777777bbbb777666666666777777777766777bbb777777bbbb777777777776666666666777777bbb777777bbbb777666666666777
    7777777666bbb77777777777bbb77777777766666666667777bbb77777777777bbb76666666667777777777666bbb77777777777bbb77777777766666666667777bbb77777777777bbb7666666666777
    777777766bb777777777777777bbb77777776666666666777bb777777777777777bbb66666666777777777766bb777777777777777bbb77777776666666666777bb777777777777777bbb66666666777
    7777777bbb777777777777777777bbbb777766666666666bbb777777777777777777bbbb666667777777777bbb777777777777777777bbbb777766666666666bbb777777777777777777bbbb66666777
    bb777bbb77777777777777777777777bbbbbbbbbbb666bbb77777777777777777777777bbbbbbbbbbb777bbb77777777777777777777777bbbbbbbbbbb666bbb77777777777777777777777bbbbbbbbb
    7bbbbb777777777777777777777777777bb777777bbbbb777777777777777777777777777bb777777bbbbb777777777777777777777777777bb777777bbbbb777777777777777777777777777bb77777
    777bb7777777777777777777777777bbb7777777777bb7777777777777777777777777bbb7777777777bb7777777777777777777777777bbb7777777777bb7777777777777777777777777bbb7777777
    77777bb777777777777777777777bb777777777777777bb777777777777777777777bb777777777777777bb777777777777777777777bb777777777777777bb777777777777777777777bb7777777777
    7777777bbb7777777777777777bb7777777777777777777bbb7777777777777777bb7777777777777777777bbb7777777777777777bb7777777777777777777bbb7777777777777777bb777777777777
    7777777777bbb77777777777bb777777777777777777777777bbb77777777777bb777777777777777777777777bbb77777777777bb777777777777777777777777bbb77777777777bb77777777777777
    777777777777bbb7777777bb7777777777777777777777777777bbb7777777bb7777777777777777777777777777bbb7777777bb7777777777777777777777777777bbb7777777bb7777777777777777
    77777777777777bbb777bb77777777777777777777777777777777bbb777bb77777777777777777777777777777777bbb777bb77777777777777777777777777777777bbb777bb777777777777777777
    7777777777777777bbbb777777777777777777777777777777777777bbbb777777777777777777777777777777777777bbbb777777777777777777777777777777777777bbbb77777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
    `)
snakebody = []
atefoodflag = 0
snakehead = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    . . . . . . 2 2 2 2 2 2 2 2 2 2 
    `, SpriteKind.Player)
snakefood = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . f f f f . . f f f f . . . 
    . . f f 2 2 2 f f 2 2 2 f f . . 
    . f f 2 1 1 2 2 2 2 2 2 2 f f . 
    . f 2 1 1 2 2 2 2 2 2 2 2 2 f . 
    . f 2 1 2 2 2 2 2 2 2 2 2 2 f . 
    . f 2 2 2 2 2 2 2 2 2 2 2 2 f . 
    . f f 2 2 2 2 2 2 2 2 2 2 f f . 
    . . f 2 2 2 2 2 2 2 2 2 2 f . . 
    . . f f 2 2 2 2 2 2 2 2 f f . . 
    . . . f f 2 2 2 2 2 2 f f . . . 
    . . . . f f 2 2 2 2 f f . . . . 
    . . . . . f f 2 2 f f . . . . . 
    . . . . . . f f f f . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Food)
foodx = 80
foody = 60
vx = 1
vy = 0
game.onUpdate(function () {
    for (let value of snakebody) {
        if (!(value == snakebody[1]) && !(value == snakebody[0]) && snakehead.overlapsWith(value)) {
            game.over(false)
        }
    }
    if (snakeheadx < 0 || (snakeheadx > 160 || (snakeheady < 0 || snakeheady > 120))) {
        game.over(false)
    }
})
game.onUpdate(function () {
    snakehead.setPosition(snakeheadx + 2, snakeheady + 2)
    snakefood.setPosition(foodx + 2, foody + 2)
    if (snakeheadx % 10 == 0 && snakeheady % 10 == 0) {
        snakebody.unshift(sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            . . . . . . 2 2 2 2 2 2 2 2 2 2 
            `, SpriteKind.Player))
        snakebody[0].setPosition(snakeheadx + 2, snakeheady + 2)
        snakebody.pop().destroy()
        updatevx = vx
        updatevy = vy
        atefoodflag = 0
    }
    snakeheadx += updatevx
    snakeheady += updatevy
})
